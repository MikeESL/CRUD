$(document).ready(function(){var a=$(".duetoday"),b=$(".duetomorrow"),c=$(".completedtasks");$(".duetodayLink").click(function(){event.preventDefault(),a.hasClass("show")||(a.siblings().removeClass("show"),$(".duetodayLink").addClass("current"),$(".duetodayLink").parent().siblings().children().removeClass("current"),a.addClass("show"))}),$(".duetomorrowLink").click(function(){event.preventDefault(),b.hasClass("show")||(b.siblings().removeClass("show"),b.addClass("show"),$(".duetomorrowLink").addClass("current"),$(".duetomorrowLink").parent().siblings().children().removeClass("current"))}),$(".completedtasksLink").click(function(){event.preventDefault(),c.hasClass("show")||(c.siblings().removeClass("show"),c.addClass("show"),$(".completedtasksLink").addClass("current"),$(".completedtasksLink").parent().siblings().children().removeClass("current"))})}),Templates={},Templates.todayDoTmpl=["<% _.each(newToDoInput, function(newToDoInput, index, list) { %>",'<li data-todayid="<%= newToDoInput._id %>" data-index="<%= index %>" class="toDoItem"><div class="newCheck"><span class="glyphicon glyphicon-remove finishedItem"></span></div>',"<%= newToDoInput.todayDo %>","</li>","<% }); %>"].join("\n"),$(document).ready(function(){ToDos.init()});var ToDos={init:function(){this.initStyling(),this.initEvents()},initStyling:function(){this.renderToDos()},initEvents:function(){$("#todaytodoSubmit").on("submit",this.inputToDo),$(".duetodayul").on("click",".finishedItem",this.removeToDo),$(".duetodayul").on("click",".submitEdit",this.updateToDo)},render:function(a,b,c){var d=_.template(b,c);a.html(d)},inputToDo:function(a){a.preventDefault();var b={todayDo:$(".taskToday").val()};$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/mike",type:"POST",data:b,dataType:"JSON",error:function(){},success:function(a){ToDos.renderToDos(a)}})},renderToDos:function(){$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/mike",type:"GET",data:"data",dataType:"JSON",error:function(){},success:function(a){var b=window.newToDoInput=a;ToDos.render($(".duetodayul"),Templates.todayDoTmpl,b)}})},removeToDo:function(a){a.preventDefault();var b=$(this).closest("li"),c=b.data("todayid");console.log(c),$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/mike/"+c,type:"DELETE",error:function(){},success:function(a){ToDos.renderToDos(a)}})},updateToDo:function(a){a.preventDefault();var b=$(this).closest("li"),c=b.data("todayid");console.log(c),window.updateToDoInput={todayDo:b.find(".taskEdit").val()},$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/mike/"+c,type:"PUT",data:window.updateToDoInput,error:function(){alert("update failed")},success:function(){ToDos.render($(".duetodayul"),Templates.editToDoTmpl,updateToDoInput),console.log($(".newCheck")),$(".newCheck").html(window.updateToDoInput.todayDo),$(".newForm").html(window.updateToDoInput.todayDo)}})}};